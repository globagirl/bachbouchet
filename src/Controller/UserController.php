<?phpnamespace App\Controller;use App\Document\contact;use App\Document\Pet;use App\Document\PetParent;use Doctrine\ODM\MongoDB\DocumentManager;use Symfony\Bundle\FrameworkBundle\Controller\AbstractController;use Symfony\Component\Form\Extension\Core\Type\EmailType;use Symfony\Component\Form\Extension\Core\Type\PasswordType;use Symfony\Component\Form\Extension\Core\Type\SubmitType;use Symfony\Component\HttpFoundation\Request;use Symfony\Component\HttpFoundation\Response;use Symfony\Component\Routing\Annotation\Route;/** * @Route("/auth") */class UserController extends AbstractController{    /**     * @Route("/signup", name="signup")     */    public function signup(DocumentManager $dm, Request $request): Response    {        $user = new PetParent();        $user->setEmail('test@tef');        $user->setPassword('12345');        $user->setRoles(['ROLE_PAR']);        $user->setName('aamaar');        $user->setJoinedAt(new \DateTime());        $cont=new contact();        $cont->setAddress('cite **** rue 555');        $cont->setCity('charguia');        $cont->setZipcode('7003');        $cont->setPhone('66 666 666');//        $dm->persist($cont);        $pet=new Pet();        $pet->setPseudo("sinouja");        $pet->setGender("Male");        $pet->setRace("**");        $pet->setColor("black");        $pet->setBirthdate(new \DateTime());        $pet->setVaccinated(TRUE);        $pet->setDescription("calm and sweet");//        $dm->persist($pet);        $user->setContact($cont);        $user->setPet([$pet]);        $dm->persist($user);        $dm->flush();        return new Response("ok");        /*                //form creation                $form = $this->createFormBuilder($user)                    ->add('email',EmailType::class)                    ->add('password',PasswordType::class)                    ->add('SignUp',SubmitType::class)                    ->getForm();                $form->handleRequest($request);                //form action                if ($form->isSubmitted()) {                    $produit = $dm->getRepository(Produit::class)->findOneBy(['nom'=> 'Smartphone']);                    $user->setProduit($produit);                    $dm->persist($user);                    $dm->flush();                    $this->addFlash(                        'notice',                        'Subscribed successfully ! '                    );                    return $this->redirect($this->generateUrl('login'));                }                return $this->render('Auth/signup.html.twig', ["form"=>$form->createView()]);        */}    /**     * @Route("/login", name="login")     */    public function login(DocumentManager $dm, Request $request): Response    {        $user = new User();        //form creation        $form = $this->createFormBuilder($user)            ->add('email',EmailType::class)            ->add('password',PasswordType::class)            ->add('Login',SubmitType::class)            ->getForm();        $form->handleRequest($request);        if ($form->isSubmitted()) {            $user = $dm->getRepository(User::class)->findOneBy(["email"=>$user->getEmail()]);            if ($user){                //TODO:: add session + dashboard page                return $this->redirect($this->generateUrl('home'));            }else{                $this->addFlash(                    'notice',                    'Please verify your entry!'                );            }        }        return $this->render('Auth/login.html.twig', ["form"=>$form->createView()]);    }    /**     * @Route("/logout", name="logout")     */    public function logout(): Response    {        return $this->render('Auth/login.html.twig');    }}