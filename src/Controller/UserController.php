<?phpnamespace App\Controller;use App\Document\contact;use App\Document\Pet;use App\Document\PetParent;use App\Form\ContactType;use App\Form\PetType;use App\Form\UserType;use Doctrine\ODM\MongoDB\DocumentManager;use Symfony\Bundle\FrameworkBundle\Controller\AbstractController;use Symfony\Component\Form\Extension\Core\Type\CollectionType;use Symfony\Component\Form\Extension\Core\Type\EmailType;use Symfony\Component\Form\Extension\Core\Type\PasswordType;use Symfony\Component\Form\Extension\Core\Type\SubmitType;use Symfony\Component\HttpFoundation\Request;use Symfony\Component\HttpFoundation\Response;use Symfony\Component\Routing\Annotation\Route;/** * @Route("/auth") */class UserController extends AbstractController{    /**     * @Route("/signup", name="signup")     */    public function signup(DocumentManager $dm, Request $request): Response    {        $user = new PetParent();        $cont=new contact();        $items = ['user' => $user, 'contact' => $cont];        $form = $this->createFormBuilder($items)            ->add('user', UserType::class)            ->add('contact', ContactType::class)//            ->add('pet', CollectionType::class,[//                'entry_type' => PetType::class,//                'allow_add' => true,//                'by_reference' => false,//                'allow_delete' => true,//            ])            ->add('save', SubmitType::class, ['label' => 'SignUp'])            ->getForm();        $form->handleRequest($request);        //form action        if ($form->isSubmitted() && $form->isValid()) {            $user->setRoles(['ROLE_PAR']);            $user->setJoinedAt(new \DateTime());            $user->setContact($cont);//            $user->setPet([$pet]);            $dm->persist($user);            if($dm->flush()){                $this->addFlash(                    'notice',                    'Subscribed successfully ! '                );            }            return $this->redirect($this->generateUrl('login'));        }        return $this->render('Auth/signup.html.twig', [            "form"=>$form->createView()        ]);    }    /**     * @Route("/login", name="login")     */    public function login(DocumentManager $dm, Request $request): Response    {        $user = new PetParent();        //form creation        $form = $this->createFormBuilder($user)            ->add('email',EmailType::class)            ->add('password',PasswordType::class)            ->add('Login',SubmitType::class)            ->getForm();        $form->handleRequest($request);        if ($form->isSubmitted()) {            $user = $dm->getRepository(PetParent::class)->findOneBy(["email"=>$user->getEmail()]);            if ($user){                //TODO:: add session + dashboard page                return $this->redirect($this->generateUrl('home'));            }else{                $this->addFlash(                    'notice',                    'Please verify your entry!'                );            }        }        return $this->render('Auth/login.html.twig', ["form"=>$form->createView()]);    }    /**     * @Route("/logout", name="logout")     */    public function logout(): Response    {        return $this->render('Auth/login.html.twig');    }}